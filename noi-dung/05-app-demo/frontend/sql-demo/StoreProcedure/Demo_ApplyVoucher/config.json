{
      "id": "sp-apply-voucher",
      "title": "SP 5: √Åp D·ª•ng Voucher",
      "type": "Stored Procedure",
      "shortDesc": "Stored Procedure ƒë·ªÉ √°p d·ª•ng m√£ gi·∫£m gi√° cho booking",
      "mdFile": "StoreProcedure/Demo_ApplyVoucher/problem.html",
      "sqlFile": "StoreProcedure/Demo_ApplyVoucher/sp_ApplyVoucher.sql",
      "tables": [
            "DATPHONG",
            "VOUCHERS"
      ],
      "separateTables": [
            {
                  "name": "DATPHONG",
                  "label": "üìã B·∫£ng ƒê·∫∑t Ph√≤ng",
                  "sqlBefore": "SELECT id, user_id, voucher_id, trang_thai FROM DATPHONG WHERE id = @BookingID",
                  "sqlAfter": "SELECT id, user_id, voucher_id, trang_thai FROM DATPHONG WHERE id = @BookingID",
                  "columns": [
                        {
                              "key": "id",
                              "label": "Booking ID",
                              "isPk": true
                        },
                        {
                              "key": "user_id",
                              "label": "User ID"
                        },
                        {
                              "key": "voucher_code",
                              "label": "‚ö° M√£ Voucher"
                        },
                        {
                              "key": "trang_thai",
                              "label": "Tr·∫°ng Th√°i"
                        }
                  ]
            },
            {
                  "name": "VOUCHERS",
                  "label": "üéüÔ∏è B·∫£ng Vouchers",
                  "sqlBefore": "SELECT id, ma_code, phan_tram_giam, so_lan_da_dung, trang_thai FROM VOUCHERS WHERE ma_code = @VoucherCode",
                  "sqlAfter": "SELECT id, ma_code, phan_tram_giam, so_lan_da_dung, trang_thai FROM VOUCHERS WHERE ma_code = @VoucherCode",
                  "columns": [
                        {
                              "key": "id",
                              "label": "ID",
                              "isPk": true
                        },
                        {
                              "key": "ma_code",
                              "label": "M√£ Code"
                        },
                        {
                              "key": "phan_tram_giam",
                              "label": "% Gi·∫£m"
                        },
                        {
                              "key": "so_lan_da_dung",
                              "label": "‚ö° ƒê√£ D√πng"
                        },
                        {
                              "key": "trang_thai",
                              "label": "Tr·∫°ng Th√°i"
                        }
                  ]
            }
      ],
      "sqlFetchInitial": "SELECT TOP 20 dp.id, dp.user_id, dp.voucher_id FROM DATPHONG dp ORDER BY dp.created_at DESC",
      "sqlFetchBefore": "SELECT id, user_id, voucher_id FROM DATPHONG WHERE id = @DatPhongId",
      "sqlFetchAfter": "SELECT id, user_id, voucher_id FROM DATPHONG WHERE id = @DatPhongId",
      "columns": [
            {
                  "key": "id",
                  "label": "Booking ID",
                  "isPk": true
            },
            {
                  "key": "user_id",
                  "label": "User ID"
            },
            {
                  "key": "voucher_code",
                  "label": "M√£ Voucher"
            },
            {
                  "key": "trang_thai",
                  "label": "Tr·∫°ng Th√°i"
            }
      ],
      "params": [
            {
                  "name": "@DatPhongId",
                  "type": "int",
                  "defaultValue": 4
            },
            {
                  "name": "@VoucherCode",
                  "type": "string",
                  "defaultValue": "DISCOUNT5"
            },
            {
                  "name": "@TongTienPhong",
                  "type": "decimal",
                  "defaultValue": 0,
                  "isOutput": true
            },
            {
                  "name": "@TienGiam",
                  "type": "decimal",
                  "defaultValue": 0,
                  "isOutput": true
            },
            {
                  "name": "@TongTienSauGiam",
                  "type": "decimal",
                  "defaultValue": 0,
                  "isOutput": true
            }
      ],
      "mockData": {
            "before": [
                  {
                        "id": 1,
                        "user_id": 1,
                        "voucher_code": null,
                        "discount_amount": 0
                  }
            ],
            "after": [
                  {
                        "id": 1,
                        "user_id": 1,
                        "voucher_code": "SALE50",
                        "discount_amount": 500000
                  }
            ]
      }
}